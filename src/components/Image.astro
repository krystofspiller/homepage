---
import { Picture, type LocalImageProps } from "astro:assets"

type Props = LocalImageProps & {
  alt: string
}

const { src, alt, ...rest } = Astro.props

// Check if the source is a GIF file - if so, don't convert to AVIF
const isGif = "format" in src && src.format === "gif"
---

<Picture
  src={src}
  alt={alt}
  formats={isGif ? ["webp"] : ["avif", "webp"]}
  {...rest}
/>
